<div class="py-4">
    <h2>Registro</h2>
    <hr class="w-50" />

    <form>
        <div class="form-group row w-50 m-auto">
            <div class="form-group col-12 col-sm-6">
                <label>Nombre</label>
                <input value="Primer" class="form-control m-auto" name="nombre" />
            </div>
            <div class="form-group col-12 col-sm-6">
                <label>Apellido</label>
                <input value="Ejemplo" class="form-control m-auto" name="apellido" />
            </div>
            <div class="form-group col-12 col-sm-6">
                <label>Email</label>
                <input value="primer@ejemplo.com" class="form-control m-auto" type="email" name="email" />
            </div>
            <div class="form-group col-12 col-sm-6">
                <label>Contrase침a</label>
                <input value="encriptada1" class="form-control m-auto" type="password" id="password1" />
            </div>
            <div class="form-group col-12 col-sm-6">
                <label>Confirme Contrase침a</label>
                <input value="encriptada1" class="form-control m-auto" type="password" name="password" id="passwordConfirmado" />
            </div>
            <div class="form-group col-12 col-sm-6">
                <label>Fecha de Muerte</label>
                <input value="2022-07-30T04:00:00.000Z" class="form-control m-auto" name="fecha_muerte" type="date"/>
            </div>
            <div class="form-group col-12">
                <label>Nombre Playlist</label>
                <input value="Primera Lista" class="form-control m-auto" name="nombre_playlist" type="text"/>
            </div>

        </div>
        <button type="submit" class="btn btn-info mb-3">Registrarme</button>
        <p><a href="/login"> Iniciar sesi칩n</a></p>
    </form>
</div>

<script>
    document.querySelector("form").addEventListener("submit", async (e) => {
        e.preventDefault();
         //Campos de password deben calzar
        const pass1 = document.getElementById('password1');
        const pass2 = document.getElementById('passwordConfirmado');
        if (pass1.value !== pass2.value) {
            return alert("Las contrase침as no coinciden");
        }
        try{
            const response = await axios.post('/usuarios', {
                nombre: document.querySelector("input[name='nombre']").value,
                apellido: document.querySelector("input[name='apellido']").value,
                email: document.querySelector("input[name='email']").value,
                password: document.querySelector("input[name='password']").value,
                fecha_muerte: document.querySelector("input[name='fecha_muerte']").value,
                nombre_playlist: document.querySelector("input[name='nombre_playlist']").value
            });
            window.location.href=response.data
            }
        catch(e) {
            alert(e.response.data)
        }
    })
</script>