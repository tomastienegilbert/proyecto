<div class="py-4">
    <h2>Agrega canciones a tu playlist</h2>
    <hr class="w-50" />
  
    <form>
        <div class="form-group row w-50 m-auto">
            <div class="form-group col-12 col-sm-6">
                <label>Titulo</label>
                <input value="ejemplo1" name="titulo" class="form-control m-auto" />
            </div>
            <div class="form-group col-12 col-sm-6">
                <label>Álbum</label>
                <input value="ejemplo1" name="album" class="form-control m-auto" />
            </div>
            <div class="form-group col-12 col-sm-6">
                <label>Artista</label>
                <input value="ejemplo1" name="artista" class="form-control m-auto" />
            </div>
            <div class="form-group col-12 col-sm-6">
                <label>Comentario</label>
                <input value="ejemplo1" name="comentario" class="form-control m-auto" />
            </div>
            <div class="form-group col-12">
                <label>Enlace</label>
                <input value="ejemplo1" name="enlace" class="form-control m-auto" />
            </div>
  
        </div>
        <div class="mb-1">
            <button type="submit" class="btn btn-primary" id="agregarCancion">Agregar Canción</button>
        </div>
    </form>
 </div> 
<script>
    //verificar token
    const token = localStorage.getItem('token');
  if (!token) {
    alert("Debes iniciar sesión para agregar canciones");
    window.location.replace("/ingreso");
  }

  // enviar datos de cancion con agregar canciones
  const form = document.querySelector("form");
  document.querySelector("form").addEventListener("submit", async (e) => {
    e.preventDefault();

    let [titulo, album, artista, comentario, enlace] = document.querySelectorAll("input");
    titulo = titulo.value;
    album = album.value;
    artista = artista.value;
    comentario = comentario.value;
    enlace = enlace.value;
    try{
        const response = await axios.post('/canciones', {
            token,
            titulo,
            album,
            artista,
            comentario,
            enlace
        })
    res.send(response);
    alert("cancion agregada");
    }
    catch(e) {
        console.log(e.response.data)
        alert(e.response.data)
    }
  });

</script>