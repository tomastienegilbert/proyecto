<div class="py-4">
    <h2>Agrega canciones a tu playlist</h2>
    <hr class="w-50" />
  
    <form action="/canciones" method="POST">
        <div class="form-group row w-50 m-auto">
            <div class="form-group col-12 col-sm-6">
                <label>Titulo</label>
                <input name="titulo" class="form-control m-auto" />
            </div>
            <div class="form-group col-12 col-sm-6">
                <label>Álbum</label>
                <input name="album" class="form-control m-auto" />
            </div>
            <div class="form-group col-12 col-sm-6">
                <label>Artista</label>
                <input name="artista" class="form-control m-auto" />
            </div>
            <div class="form-group col-12 col-sm-6">
                <label>Comentario</label>
                <input name="comentario" class="form-control m-auto" />
            </div>
            <div class="form-group col-12">
                <label>Enlace</label>
                <input name="enlace" class="form-control m-auto" />
            </div>
  
        </div>
        <div class="mb-1">
            <button class="btn btn-primary" id="agregarCancion">Agregar Canción</button>
        </div>
    </form>
 </div> 
<script>
     const usuario = JSON.parse(localStorage.getItem('usuario'));
    if (usuario) {
        document.querySelector("img").setAttribute("src", usuario.foto);
        let [email, name, password, repeat_password] = document.querySelectorAll("input");
        email.value = usuario.email;
        name.value = usuario.name;
    } else {
        location.replace('/');
    }
    const form = document.querySelector("form")
    form.addEventListener("submit", async (e) => {
        e.preventDefault()
        let [email, name, password, repeat_password] = document.querySelectorAll("input");
        name = name.value
        password = password.value
        if (password !== repeat_password.value) {
            return alert('Las contraseñas deben ser iguales');
        }
        if (!name || !password) {
            return alert('Debes completar el formulario');
        }
        const usuario = {
            name,
            password
        }
        try {
            await axios.put("/usuarios", usuario);
            alert("Datos actualizados con éxito")
            window.location = "/login"
        } catch (error) {
            console.log(error)
        }
    })
</script>

